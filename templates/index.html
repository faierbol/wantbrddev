{% extends 'base.html' %}
{% load staticfiles %}
{% load comments static %}
{% load thumbnail %}


{% block title %}
	Welcome to Wantbrd | Taking the guessing out of giving!
{% endblock %}


{% block extra-css %}
	<link type="text/css" href="{% static 'css/slick.css' %}" rel="stylesheet" />
	<link type="text/css" href="{% static 'css/macy.css' %}" rel="stylesheet" />
{% endblock %}


{% block body %}   

<div class="homeBannerPush"></div>
<section class="homeBanner desktop clearfix">
    <div class="homeSlider">
        <div><img src="{% static 'img/banner-6.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-3.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-4.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-1.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-5.jpg' %}" alt=""></div>
    </div>
    <div class="slickLeft"><i class="fas fa-chevron-right"></i></div>
    <div class="slickRight"><i class="fas fa-chevron-left"></i></div>
</section>

<section class="homeBanner mobile clearfix">
    <div class="homeSliderMobile">
        <div><img src="{% static 'img/banner-6b.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-3b.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-4b.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-1b.jpg' %}" alt=""></div>
        <div><img src="{% static 'img/banner-5b.jpg' %}" alt=""></div>
    </div>
</section>


<section class="homeBoard">
    <div class="container">

        <img src="{{res}}">

        <div class="tabNav">
            <a href="/" class="tabOn">Hot</a>
            <a href="/trending/users">Trending users</a>
            <a href="/trending/boards">Trending boards</a>
            <a href="/trending/items">Trending items</a>
        </div>

        
        <div id="homeBoardItems">  

            {% for hot in hot_items %}          

                <!-- ### TRENDING BOARDS ### -->
                {% if hot.board_name and not hot.recommended %}

                    <div class="featBox trendingBoard">
                        <div class="trendingTop clearfix">
                            <strong>Trending Board</strong>
                            <div class="share-link trendingUserShare">
                                <a class="toggle" href="javascript:void(0);"><i class="fas fa-share-alt"></i> Share</a>
                                <div class="tip">
                                    <div class="ssk-group">
                                        <a href="" class="ssk ssk-icon ssk-facebook"
                                            data-url="{% url 'b:view_board' hot.user.username hot.slug %}"
                                            data-text="Checkout {{ hot.board_name }} by {{ hot.user.username }}: https://www.wantbrd.com{% url 'b:view_board' hot.user.username hot.slug %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-twitter"
                                            data-url="{% url 'b:view_board' hot.user.username hot.slug %}"
                                            data-text="Checkout {{ hot.board_name }} by {{ hot.user.username }}: https://www.wantbrd.com{% url 'b:view_board' hot.user.username hot.slug %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-google-plus"
                                            data-url="{% url 'b:view_board' hot.user.username hot.slug %}"
                                            data-text="Checkout {{ hot.board_name }} by {{ hot.user.username }}: https://www.wantbrd.com{% url 'b:view_board' hot.user.username hot.slug %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-pinterest"   
                                            data-url="{% url 'b:view_board' hot.user.username hot.slug %}"
                                            data-text="Checkout {{ hot.board_name }} by {{ hot.user.username }}: https://www.wantbrd.com{% url 'b:view_board' hot.user.username hot.slug %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-tumblr"
                                            data-url="{% url 'b:view_board' hot.user.username hot.slug %}"
                                            data-text="Checkout {{ hot.board_name }} by {{ hot.user.username }}: https://www.wantbrd.com{% url 'b:view_board' hot.user.username hot.slug %}"
                                        ></a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {% if hot.hero %}
                        <a class="trendingBoardHero" style="background-image:url('{{ hot.hero.url }}');" href="{% url 'b:view_board' hot.user.username hot.slug %}">
                        {% else %}    
                        <a class="trendingBoardHero" style="background-image:url('{% static 'img/default-hero.png' %}');" href="{% url 'b:view_board' hot.user.username hot.slug %}">
                        {% endif %}

                            <div class="trendingBoardMeta">
                                <strong>{{ hot.board_name }}</strong>
                            </div>
                        </a>
                        <div class="trendingItems clearfix">
                            {% for itemconx in hot.itemconxs %}
                                {% thumbnail itemconx.image "300x300" as im %}
                                    <a style="background-image:url('{{ im.url }}');" href="{% url 'b:view_board' hot.user.username hot.slug %}"></a>
                                {% endthumbnail %}                              
                            {% endfor %}                                

                            {% if hot.totalitems > 5 %}
                                <a class="plusMore" href="{% url 'b:view_board' hot.user.username hot.slug %}">
                                    <div class="plusMoreNumber">+{{ hot.totalitems|add:"-5" }}</div>
                                </a>
                            {% endif %}
                        </div>
                        <a class="trendingUserUser" href="{% url 'u:profile' hot.user.username %}">
                            <div class="trendingUserUserWrap clearfix">
                                <div class="trendingUserPic">
                                    {% if hot.user.profile.picture %}
                                        <div class="circle" style="background-image:url('{{ hot.user.profile.picture.url }}');"></div>
                                    {% else %}
                                        <div class="circle" style="background-image:url('{% static 'img/default-hero.png' %}');"></div>
                                    {% endif %}
                                </div>
                                <div class="trendingUserNames">
                                    <strong>@{{ hot.user.username }}</strong>
                                    <span>{{ hot.user.get_full_name }}</span>
                                </div>
                            </div>
                        </a>
                        <div class="trendingFooter">
                            <span>{{ hot.totalitems }} {% if hot.totalitems > 1 or hot_items.totalitems == 0 %} Items {% else %} Item {% endif %}</span>
                            <span>{{ hot.views }} {% if hot.views > 1 or hot.views == 0 %} Views {% else %} View {% endif %}</span>
                        </div>
                    </div>

                <!-- ### TRENDING USERS ### -->
                {% elif hot.username %}
                    <div class="featBox trendingUser">
                        <div class="trendingTop clearfix">
                            <strong>Trending User</strong>
                            <div class="share-link trendingUserShare">
                                <a class="toggle" href="javascript:void(0);"><i class="fas fa-share-alt"></i> Share</a>
                                <div class="tip">
                                    <div class="ssk-group">
                                        <a href="" class="ssk ssk-icon ssk-facebook"
                                            data-url="{% url 'u:profile' hot.username %}"
                                            data-text="Checkout {{ hot.username }} on Wantbrd: https://www.wantbrd.com{% url 'u:profile' hot.username %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-twitter"
                                        data-url="{% url 'u:profile' hot.username %}"
                                        data-text="Checkout {{ hot.username }} on Wantbrd: https://www.wantbrd.com{% url 'u:profile' hot.username %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-google-plus"
                                        data-url="{% url 'u:profile' hot.username %}"
                                        data-text="Checkout {{ hot.username }} on Wantbrd: https://www.wantbrd.com{% url 'u:profile' hot.username %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-pinterest"   
                                        data-url="{% url 'u:profile' hot.username %}"
                                        data-text="Checkout {{ hot.username }} on Wantbrd: https://www.wantbrd.com{% url 'u:profile' hot.username %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-tumblr"
                                        data-url="{% url 'u:profile' hot.username %}"
                                        data-text="Checkout {{ hot.username }} on Wantbrd: https://www.wantbrd.com{% url 'u:profile' hot.username %}"
                                        ></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a class="trendingUserUser" href="{% url 'u:profile' hot.username  %}">
                            <div class="trendingUserUserWrap clearfix">
                                <div class="trendingUserPic">
                                    {% if hot.profile.picture %}
                                    <div class="circle" style="background-image:url('{{ hot.profile.picture.url }}');"></div>
                                    {% else %}
                                    <div class="circle" style="background-image:url('{% static 'img/default-hero.png' %}');"></div>
                                    {% endif %}
                                </div>
                                <div class="trendingUserNames">
                                    <strong>@{{ hot.username }}</strong>
                                    <span>{{ hot.get_full_name }}</span>
                                </div>
                            </div>
                        </a>
                        
                        <a class="trendingUserHero" href="{% url 'u:profile' hot.username  %}" style="background-image:url('{% static 'img/profile-hero.jpg' %}')"></a>

                        <div class="trendingItems clearfix">
                            {% for item in hot.items %}
                                {% thumbnail item.image "300x300" as im %}
                                    <a style="background-image:url('{{ im.url }}');" href="{% url 'u:profile' hot.username  %}"></a>
                                {% endthumbnail %}
                            {% endfor %}

                            {% if hot.itemcount > 2 %}
                                <a class="plusMore" href="{% url 'u:profile' hot.username  %}">
                                    <div class="plusMoreNumber">+{{ hot.itemcount|add:"-2" }}</div>
                                </a>
                            {% endif %}
                        </div>
                        <div class="trendingFooter">
                            <span>{{ hot.totalboards }} {% if hot.totalboards > 1 or hot.totalboards == 0 %} Boards {% else %} Board {% endif %}</span>
                            <span>{{ hot.totalitems }} {% if hot.totalitems > 1 or hot.totalitems == 0 %} Items {% else %} Item {% endif %}</span>
                        </div>
                    </div>

                {% elif hot.item %}
                    <div class="featBox trendingItem">
                        <div class="trendingTop clearfix">
                            <strong>Trending Item</strong>
                            <div class="share-link trendingUserShare">
                                <a class="toggle" href="javascript:void(0);"><i class="fas fa-share-alt"></i> Share</a>
                                <div class="tip">
                                    <div class="ssk-group">
                                        <a href="" class="ssk ssk-icon ssk-facebook"
                                            data-udrl="{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                            data-text="Checkout this item I found on Wantbrd: {{ hot.item.item_name }} - https://www.wantbrd.com{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-twitter"
                                        data-udrl="{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        data-text="Checkout this item I found on Wantbrd: {{ hot.item.item_name }} - https://www.wantbrd.com{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-google-plus"
                                        data-udrl="{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        data-text="Checkout this item I found on Wantbrd: {{ hot.item.item_name }} - https://www.wantbrd.com{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-pinterest"
                                        data-udrl="{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        data-text="Checkout this item I found on Wantbrd: {{ hot.item.item_name }} - https://www.wantbrd.com{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        ></a>
                                        <a href="" class="ssk ssk-icon ssk-tumblr"
                                            data-udrl="{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                            data-text="Checkout this item I found on Wantbrd: {{ hot.item.item_name }} - https://www.wantbrd.com{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"
                                        ></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="trendingItemItem">
                            {% thumbnail hot.image "300x300" as im %}
                                <a href="{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}"><img src="{{ im.url }}"></a>
                            {% endthumbnail %}
                        </div>
                        <div class="trendingItemName">
                            <a href="{% url 'b:view_item' hot.board.user hot.board.slug hot.id %}">{{ hot.item.item_name }}</a>
                            <div class="trendingItemMeta">
                                Found on <a href="{% url 'b:view_board' hot.board.user hot.board.slug %}">{{ hot.board.board_name }}</a>
                                by <a href="{% url 'u:profile' hot.board.user %}">{{ hot.board.user.get_full_name }}</a>
                            </div>
                        </div>              
                        <div class="trendingFooter">
                            <span><i class="far fa-comments"></i>
                                {% get_comment_count for hot as comment_count %}
                                {% if comment_count %}
                                    {{ comment_count }}
                                {% else %}
                                    0
                                {% endif %}
                            </span>
                            
                            <form class="inline unlikeitem" method="POST" data-id="{{hot.id }}" style="display:{% if hot.is_liked %} inline-block {% else %} none {% endif %}">
                                {% csrf_token %}
                                <input type="hidden" class="unlike_item_id" name="item_id" value="{{ hot.id }}">
                                <button class="naked unlikeitembutton" data-id="{{hot.id }}" name="unlikeitem">
                                    <i class="fas fa-heart likeon"></i>
                                    <span>{{ hot.likes }}</span>
                                </button>
                            </form>

                            <form class="inline likeitem" method="POST"  data-id="{{hot.id }}" style="display:{% if hot.is_liked %} none {% else %} inline-block {% endif %}">
                                {% csrf_token %}
                                <input type="hidden" class="like_item_id" name="item_id" value="{{ hot.id }}">
                                <button class="naked likeitembutton" data-id="{{hot.id }}" name="likeitem">
                                    <i class="fal fa-heart"></i>
                                    <span>{{ hot.likes }}</span>
                                </button>
                            </form>

                            <span><i class="fas fa-eye"></i> {{ hot.views }}</span>
                        </div>
                    </div>

                {% elif hot.recommended %}

                    <div class="featBox recommendedBoard">
                        <div class="featOrangeHead">
                            <strong>Wantbrd Recommended</strong>
                            <a href="{% url 'b:view_board' hot.user.username hot.slug %}">{{ hot.board_name }}</a>
                        </div>                        
                        {% if hot.hero %}
                            <div class="recommendedImage" style="background-image:url('{{ hot.hero.url }}');"></div>
                        {% else %}
                            <div class="recommendedImage" style="background-image:url('{% static 'img/default-hero.png' %}');"></div>
                        {% endif %}
                        <div class="recommendedText">
                            <p>{{ hot.description|truncatechars:75 }}</p>
                        </div>
                        <div class="recommendedMeta">
                            <span>{{ hot.totalitems }} {% if hot.totalitems > 1 or hot_items.totalitems == 0 %} Items {% else %} Item {% endif %}</span>
                            <span>{{ hot.views }} {% if hot.views > 1 or hot.views == 0 %} Views {% else %} View {% endif %}</span>
                        </div>
                        <a href="{% url 'b:view_board' hot.user.username hot.slug %}" class="btn grey">View Board</a>
                        <div class="clear"></div>
                    </div>            

                {% endif %}

            {% endfor %}


            <!-- feat group -->

<!--             <div class="featBox recommendedBoard group">
                <div class="featOrangeHead">
                    <strong>Featured Group</strong>
                    <a href="#">#Resorts</a>
                </div>
                <div class="featGroupMeta">
                    <span>14 Boards</span> <span>365 Items</span>
                </div>
                <div class="featGroupText">
                    <p>Luxury holidays, Island retreats, Private Islands, Resorts ...</p>
                </div>
                <a href="#" class="btn large grey">View Board</a>
                <div class="clear"></div>
            </div> -->

        </div>

    </div>  
</section>

{% endblock %}

{% block extra-js %}
<script src="{% static 'js/slick.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/macy.js' %}" type="text/javascript"></script>
<script type="text/javascript" src="{% static 'js/ajaxactions.js' %}"></script>
<script>
    var masonry = new Macy({
        container: '#homeBoardItems',
        trueOrder: false,
        waitForImages: false,
        useOwnImageLoader: false,
        debug: true,
        mobileFirst: true,
        columns: 1,
        margin: 24,
        breakAt: {
            860: 3,
            520: 2,
            320: 1
        }
    });
    $(document).ready(function(){
        $('.homeSlider').slick({
            centerMode: true,
            arrows:false,
            centerPadding: '200px',
            slidesToShow: 1,
            autoplay: false,
            dots: true,            
            responsive: [
                {
                  breakpoint: 1200,
                  settings: {
                    centerPadding: '0px',
                  }
                },
            ],
        });
        $('.slickRight').click(function(){
            $('.homeSlider').slick('slickPrev');
        })

        $('.slickLeft').click(function(){
            $('.homeSlider').slick('slickNext');
        })

        $('.homeSliderMobile').slick({
            centerMode: true,
            arrows:false,
            centerPadding: '200px',
            slidesToShow: 1,
            autoplay: false,
            dots: true,            
            responsive: [
                {
                  breakpoint: 1200,
                  settings: {
                    centerPadding: '0px',
                  }
                },
            ],
        });
    });
</script>
{% endblock %}