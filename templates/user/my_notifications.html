{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
	Your notifications | Wantbrd
{% endblock %}

{% block extra-css %}
	<link type="text/css" href="{% static 'css/date-picker.min.css' %}" rel="stylesheet" />
{% endblock %}

{% block body %}
<section class="myNotifications">

	<div class="container clearfix">

		<div class="panel">

			<h2>New Notifications</h2>

			<div class="theNotifications">
			{% if new %}
				{% for n in new %}

				<div class="aNotification clearfix">
					<div class="notifyAv">
						{% if n.user_trigger.profile.picture %}
						<div class="circle" style="background-image:url('{{ n.user_trigger.profile.picture.url }}');"></div>
						{% else %}
						<div class="circle" style="background-image:url('{% static 'img/default-hero.png' %}');"></div>
						{% endif %}
					</div>
					<div class="notifyStat">

						<span class="notifyDate">{{ n.created }}</span>

						{% if n.notification_type == 'likeitem' %}

							<a href="{% url 'u:profile' n.user_trigger %}">{{ n.user_trigger }}</a>
							liked your item 
							<a href="{% url 'b:view_item' n.user.username n.item.board.slug n.item.id %}">{{ n.item.item.item_name }}</a>

						{% elif n.notification_type == 'likeboard' %}

							<a href="{% url 'u:profile' n.user_trigger %}">{{ n.user_trigger }}</a>
							liked your board
							<a href="{% url 'b:view_board' n.user.username n.board.slug %}">{{ n.board.board_name }}</a>

						{% elif n.notification_type == 'newfollow' %}

							<a href="{% url 'u:profile' n.user_trigger %}">{{ n.user_trigger }}</a> started following you

						{% endif %}
						
					</div>					
				</div>

				{% endfor %}
			{% else %}
				<p>Good stuff! You have cleared all your notifications.</p>
			{% endif %}

			</div>

		</div>

		<div class="panel">

			<h2>Old Notifications</h2>

			<div class="theNotifications">
			{% if old %}
				{% for n in old %}

				<div class="aNotification clearfix">
					<div class="notifyAv">
						{% if n.user_trigger.profile.picture %}
						<div class="circle" style="background-image:url('{{ n.user_trigger.profile.picture.url }}');"></div>
						{% else %}
						<div class="circle" style="background-image:url('{% static 'img/default-hero.png' %}');"></div>
						{% endif %}
					</div>
					<div class="notifyStat">

						<span class="notifyDate">{{ n.created }}</span>

						{% if n.notification_type == 'likeitem' %}

							<a href="{% url 'u:profile' n.user_trigger %}">{{ n.user_trigger }}</a>
							liked your item 
							<a href="{% url 'b:view_item' n.user.username n.item.board.slug n.item.id %}">{{ n.item.item.item_name }}</a>

						{% elif n.notification_type == 'likeboard' %}

							<a href="{% url 'u:profile' n.user_trigger %}">{{ n.user_trigger }}</a>
							liked your board
							<a href="{% url 'b:view_board' n.user.username n.board.slug %}">{{ n.board.board_name }}</a>

						{% elif n.notification_type == 'newfollow' %}

							<a href="{% url 'u:profile' n.user_trigger %}">{{ n.user_trigger }}</a> started following you

						{% endif %}
						
					</div>					
				</div>

				{% endfor %}
			{% else %}
				<p>You have no previous notifications.</p>
			{% endif %}

			</div>

		</div>

	</div>

</section>
      

{% endblock %}

{% block extra-js %}

	<!--- succes alert -->
	{% if messages %}
	    {% for message in messages %}    
	        <script type="text/javascript">
	        $(function(){
	          new PNotify({
	            title: false,
	            type: "success",
	            text: 'Your board\'s tags have been updated!',
	            shadow: false,
	            delay: 5000,
	            buttons: {
	                sticker: false,
	            }
	          });
	        });
	        </script>
	    {% endfor %}
	{% endif %}

	<script type="text/javascript">

		var error = false;

		$('#id_social_instagram').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("instagram.") ){
				input.removeClass("valid").addClass("invalid");
				error = true;
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// facebook
		$('#id_social_facebook').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("facebook.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// twitter
		$('#id_social_twitter').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("twitter.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// youtube
		$('#id_social_youtube').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("youtube.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// twitch
		$('#id_social_twitch').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("twitch.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// vimeo
		$('#id_social_vimeo').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("vimeo.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// pinterest
		$('#id_social_pinterest').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("pinterest.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// weibo
		$('#id_social_weibo').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("weibo.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

		// vk
		$('#id_social_vk').on('input', function() {
			var input=$(this);
			var value=input.val();
			if (value.startsWith("http") || value.startsWith("www") || value.startsWith("vk.") ){
				input.removeClass("valid").addClass("invalid");
			} else {
				input.removeClass("invalid").addClass("valid");
			}
		});

	</script>
	<script src="{% static 'js/date-picker.min.js' %}" type="text/javascript"></script>
	<script>
	  $(function() {
	    $('[data-toggle="datepicker"]').datepicker({
	      autoHide: true,
	      zIndex: 2048,
	    });
	  });
	</script>
{% endblock %}